{"cells":[{"cell_type":"code","execution_count":43,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"collapsed":true,"id":"HST8E4-2iZkV","executionInfo":{"status":"ok","timestamp":1766091135651,"user_tz":-330,"elapsed":63,"user":{"displayName":"RJ Moorthy","userId":"04368816661288944434"}},"outputId":"b77bbbe2-dbe7-4723-a915-263309bd3ce4"},"outputs":[{"output_type":"stream","name":"stdout","text":["Writing ExpenseTracker.py\n"]}],"source":["%%writefile ExpenseTracker.py\n","#expenses tracker\n","import re\n","import datetime\n","import os\n","import csv\n","import pandas as pd\n","\n","\n","todaydate=datetime.datetime.today().strftime(\"%d-%m-%Y\")\n","todaydate=datetime.datetime.strptime(todaydate,\"%d-%m-%Y\").date()\n","\n","\n","\n","class Income():\n","  def __init__(self,name=None,Type=\"Income\",amount=None,category=None,date=None):\n","    self.__name=name\n","    self.__amount=amount\n","    self.__category=category\n","    self.__type=Type\n","    #Seting Date as today's Date if not given\n","    if  date is None:\n","      self.__date=datetime.datetime.today().date()\n","    else:\n","      try:\n","        self.__date=pd.to_datetime(date,format=\"%d-%m-%Y\").date()\n","      except ValueError:\n","        print(\"\\nInvalid date! so current day is taken\\n\")\n","        self.__date=datetime.datetime.today().date()\n","  def getdate(self):\n","    return self.__date\n","  def getcategory(self):\n","    return self.__category\n","  def gettype(self):\n","    return self.__type\n","\n","  def getname(self):\n","    return self.__name\n","\n","  def getamount(self):\n","    return self.__amount\n","\n","\n","\n","\n","\n","\n","class Expense():\n","\n","\n","    def __init__(self,name=None,Type=\"Expense\",amount=None,category=None,date=None):\n","      self.__name=name\n","      self.__amount=amount\n","      self.__category=category\n","      self.__type=Type\n","\n","\n","\n","\n","      if date is None:\n","        self.__date= datetime.datetime.today().date()\n","      else:\n","\n","        try:\n","          self.__date= pd.to_datetime(date,format=\"%d-%m-%Y\").date()\n","        except ValueError:\n","          print(\"\\nInvalid date! so current day is taken\")\n","          self.__date= datetime.datetime.today().date()\n","\n","    def getname(self):\n","      return self.__name\n","\n","    def gettype(self):\n","      return self.__type\n","\n","    def getamount(self):\n","      return self.__amount\n","    def getdate(self):\n","      return self.__date\n","\n","    def getcategory(self):\n","      return self.__category\n","\n","\n","class Expensetracker():\n","\n","  columns=[\"Name\",\"Amount\",\"Type\",\"Category\",\"Date\"]\n","\n","\n","\n","  @staticmethod\n","  def validate_amount(amount_str):\n","      try:\n","          amount = float(amount_str)\n","          if amount <= 0:\n","              print(\"Amount must be positive\")\n","              return None\n","          return amount\n","      except ValueError:\n","          print(\"Invalid amount\")\n","          return None\n","\n","  @staticmethod\n","  def validate_date(date_strr):\n","      try:\n","          date=datetime.datetime.strptime(date_strr,\"%d-%m-%Y\").date()\n","\n","          if date > todaydate:\n","              print(\"Date cannot be in future\")\n","              return None\n","          return date\n","      except ValueError:\n","          print(\"Invalid date so today date is taken\")\n","          return todaydate\n","\n","  @staticmethod\n","  def validate_string(value, field_name):\n","      if not isinstance(value, str) or not value.strip():\n","          print(f\"{field_name} must be a non-empty string.\")\n","          return None\n","      return value.strip()\n","\n","  def __init__(self):\n","    try:\n","      self.df=pd.read_csv(\"ExpenseTrackerData.csv\",parse_dates=[\"Date\"],date_format=\"%d-%m-%Y\")\n","    except FileNotFoundError:\n","      #creates csv file if not exists\n","      self.df=pd.DataFrame(columns=self.columns)\n","      self.df.to_csv(\"ExpenseTrackerData.csv\",index=False)\n","\n","  def refreshlist(self):\n","\n","    self.df=pd.read_csv(\"ExpenseTrackerData.csv\",parse_dates=[\"Date\"],date_format=\"%d-%m-%Y\")\n","\n","\n","\n","\n","  def additem(self,item):\n","    duplicate=self.df[(self.df[\"Name\"]==item.getname())&\n","               (self.df[\"Amount\"]==item.getamount())&\n","               (self.df[\"Type\"]==item.gettype())&\n","               (self.df[\"Category\"]==item.getcategory())&\n","               (self.df[\"Date\"]==item.getdate())]\n","\n","    if not duplicate.empty:\n","      print(\"Item already exists!\")\n","      return\n","\n","    temp_df=pd.DataFrame([{\"Name\":item.getname(), \"Amount\":item.getamount() , \"Type\":item.gettype(),\"Category\":item.getcategory(),\"Date\":item.getdate()}])\n","    self.df=pd.concat([self.df,temp_df],ignore_index=True)\n","    self.df.to_csv(\"ExpenseTrackerData.csv\",index=False)\n","\n","    print(\"\\n Added Successfully.\\n\")\n","\n","\n","  def removeitem(self,temp_df):\n","    if temp_df.empty:\n","      print(\" No Items to remove!\")\n","      return\n","    while True:\n","        print(\"Items: \")\n","        temp_df.reset_index(drop=True)\n","        temp_df[\"index\"]=range(0,len(temp_df))\n","\n","\n","\n","        print(temp_df.to_string(index=False))\n","        try:\n","          userinput = int(input(\"Enter the index of the expense to remove:(-1 to cancel) \"))\n","          if userinput== -1:\n","            break\n","          elif userinput < 0 or userinput >= len(temp_df):\n","            print(\"Invalid index!\")\n","            continue\n","\n","          else:\n","\n","              original_index = temp_df.loc[userinput, 'index']\n","              self.df=self.df.drop(original_index).reset_index(drop=True)\n","              self.df.to_csv(\"ExpenseTrackerData.csv\",index=False)\n","              print(\"Item removed successfully!\")\n","\n","              break\n","\n","        except ValueError:\n","          print(\"Invalid input! Please enter correct number.\")\n","          continue\n","\n","\n","\n","  def viewexpenses(self):\n","    if self.df[self.df[\"Type\"]==\"Expense\"].empty:\n","      print(\"No expenses found!\")\n","      return\n","\n","    print(self.df[self.df[\"Type\"]==\"Expense\"].to_string(index=False))\n","\n","  def viewincomes(self):\n","    if self.df[self.df[\"Type\"]==\"Income\"].empty:\n","      print(\"No incomes found!\")\n","      return\n","\n","    print(self.df[self.df[\"Type\"]==\"Income\"].to_string(index=False))\n","\n","  def viewbycategory(self,category,Type):\n","\n","     print(\"Items in Category. \")\n","     print(self.df[(self.df[\"Type\"]==Type) & (self.df[\"Category\"]==category)])\n","\n","  def filterbydate(self,fromdates,todates,Type):\n","      #formating given datas\n","      fromdate=self.validate_date(fromdates)\n","      todate=self.validate_date(todates)\n","      if fromdate is None or todate is None:\n","          print(\"Invalid date input. Please ensure dates are in dd-mm-yyyy format.\")\n","          return\n","\n","      if fromdate > todate:\n","        print(\"Invalid date range!\")\n","        return\n","\n","      filtereddf=self.df[(self.df[\"Type\"]==Type) & (self.df[\"Date\"]>=fromdate) & (self.df[\"Date\"]<=todate)]\n","      if not filtereddf.empty:\n","        df_sorted=filtereddf.sort_values(by=\"Date\")\n","\n","\n","        print(df_sorted.to_string(index=False))\n","\n","\n","      else:\n","        print(\"No expenses found in the specified date range.\")\n","\n","  def gettotal(self,Type):\n","    total=self.df[self.df[\"Type\"]==Type][\"Amount\"].sum()\n","    return total\n","\n","\n","\n","\n","\n","\n","\n","\n","  def viewjournal(self):\n","    print(self.df.to_string(index=False))\n","\n","  def input(self):\n","          while True:\n","\n","              name_input=input(\"Enter the name of the income: \")\n","              name = self.validate_string(name_input, \"Name\")\n","              if name is None:\n","                continue\n","\n","              amount_input = input(\"Enter the amount of the income: \")\n","              amount=self.validate_amount(amount_input)\n","              if amount is None:\n","                continue\n","\n","              date_input=input(\"Enter the date of the income (dd-mm-yyyy): \")\n","              date=self.validate_date(date_input)\n","\n","\n","              category_input=input(\"Enter category: \")\n","              category = self.validate_string(category_input, \"Category\")\n","              if category is None:\n","                continue\n","\n","\n","\n","              return name,amount,category,date\n","\n","  def filter(self,Type=None):\n","\n","\n","    if Type==\"Expense\":\n","      temp_df=self.df[self.df[\"Type\"]==\"Expense\"]\n","    elif Type==\"Income\":\n","      temp_df=self.df[self.df[\"Type\"]==\"Income\"]\n","    else:\n","      temp_df=self.df\n","\n","    while True:\n","      print(\"1. Filterbycategory\")\n","      print(\"2. Filterbydate\")\n","      print(\"3.sortvalue\")\n","      print(\"4.RemoveItem\")\n","      print(\"5.To Edit items\")\n","      print(\"0.To Go Back\")\n","      try:\n","        choice=int(input(\"Press number: \"))\n","\n","        if choice==1:\n","\n","\n","          self.viewbycategory(category=input(\"Enter category:\"),Type=Type)\n","        elif choice==2:\n","          fromdate=input(\"Enter the start date (dd-mm-yyyy): \")\n","          todate=input(\"Enter the end date (dd-mm-yyyy): \")\n","\n","          self.filterbydate(fromdates=fromdate,todates=todate,Type=Type)\n","        elif choice==3:\n","          print(\"1.By Date(-1 for decending order)\")\n","          print(\"2.By Amount(-2 for decending order)\")\n","\n","          print(\"0.To Go Back\")\n","          choice=int(input(\"Press number: \"))\n","\n","          if choice==1:\n","            print(temp_df.sort_values(by=\"Date\"))\n","            break\n","          elif choice==-1:\n","            print(temp_df.sort_values(by=\"Date\",ascending=False))\n","            break\n","          elif choice==2:\n","            print(temp_df.sort_values(by=\"Amount\"))\n","            break\n","          elif choice==-2:\n","            print(temp_df.sort_values(by=\"Amount\",ascending=False))\n","            break\n","\n","\n","          elif choice==0:\n","            break\n","        elif choice==5:\n","          print(\"Items: \")\n","          temp_df.reset_index(drop=True)\n","          temp_df[\"index\"]=range(0,len(temp_df))\n","          print(temp_df.to_string())\n","          userinput = int(input(\"Enter the index of the expense to edit:(-1 to cancel) \"))\n","          if userinput== -1:\n","            break\n","          elif userinput < 0 or userinput >= len(temp_df):\n","            print(\"Invalid index!\")\n","            continue\n","          else:\n","            while True:\n","              print(\"1.Edit Name\")\n","              print(\"2.Edit Amount\")\n","              print(\"3.Edit Category\")\n","              print(\"4.Edit Date\")\n","              print(\"0.To Go Back\")\n","              choice=int(input(\"Press number: \"))\n","              if choice ==1:\n","                new_value=input(\"Enter new value: \")\n","                new_value=self.validate_string(new_value,\"Name\")\n","                if new_value is None:\n","                  continue\n","\n","                original_index = temp_df.loc[userinput, 'index']\n","                self.df.at[original_index, 'Name'] = new_value\n","                self.df.to_csv(\"ExpenseTrackerData.csv\",index=False)\n","                print(\"Item edited successfully!\")\n","                self.refreshlist()\n","                break\n","              elif choice==2:\n","                new_value=input(\"Enter new value: \")\n","                new_value=self.validate_amount(new_value)\n","                if new_value is None:\n","                  continue\n","\n","                original_index = temp_df.loc[userinput, 'index']\n","                self.df.at[original_index, 'Amount'] = new_value\n","                self.df.to_csv(\"ExpenseTrackerData.csv\",index=False)\n","                print(\"Item edited successfully!\")\n","                self.refreshlist()\n","                break\n","\n","              elif choice==3:\n","                new_value=input(\"Enter new value: \")\n","                new_value=self.validate_string(new_value,\"Category\")\n","                if new_value is None:\n","                  continue\n","\n","                original_index = temp_df.loc[userinput, 'index']\n","                self.df.at[original_index, 'Category'] = new_value\n","                self.df.to_csv(\"ExpenseTrackerData.csv\",index=False)\n","                print(\"Item edited successfully!\")\n","                self.refreshlist()\n","                break\n","              elif choice==4:\n","                new_value=input(\"Enter new value: \")\n","                new_value=self.validate_date(new_value)\n","                if new_value is None:\n","                  continue\n","\n","                original_index = temp_df.loc[userinput, 'index']\n","                self.df.at[original_index, 'Date'] = new_value\n","                self.df.to_csv(\"ExpenseTrackerData.csv\",index=False)\n","                print(\"Item edited successfully!\")\n","                self.refreshlist()\n","                break\n","\n","\n","\n","              elif choice==0:\n","                break\n","              else:\n","                print(\"Invalid choice!\")\n","                continue\n","\n","        elif choice==4:\n","          self.removeitem(temp_df)\n","        elif choice==0:\n","          break\n","        else:\n","          print(\"Invalid choice!\")\n","          continue\n","\n","      except ValueError:\n","        print(\"Invalid input! Please enter correct number.\")\n","        continue\n","\n","def main():\n","\n","  tracker=Expensetracker()\n","\n","\n","  while True:\n","    print(\"\\nWelcome to Expense Tracker!\")\n","    currentstatus=tracker.gettotal(\"Income\")-tracker.gettotal(\"Expense\")\n","    print(f\"Current Status :Rs:{currentstatus}\\n\")\n","\n","    print(\"1.To add item\")\n","    print(\"2.To view item\")\n","    print(\"0. Exit\")\n","    try:\n","      choice=int(input(\"Enter your choice: \"))\n","      if choice==0:\n","        print(\"\\nThank you for using Expense Tracker!\\n\")\n","        break\n","      if choice==1:\n","        while True:\n","          print(\"1.To Add Income\")\n","          print(\"2.To Add Expense\")\n","          print(\"0.To Go Back\")\n","          try:\n","            choice=int(input(\"Enter your choice: \"))\n","            if choice==1:\n","              while True:\n","                confirmation=input(\"Press Any key to confirm or Press enter to Cancel \\n\")\n","                if confirmation ==\"\":\n","                  break\n","                else:\n","                  name,amount,category,date=tracker.input()\n","\n","                  income=Income(name=name,amount=amount,category=category,date=date,Type=\"Income\")\n","\n","                  tracker.additem(income)\n","                  break\n","\n","\n","\n","            elif choice==2:\n","              while True:\n","                confirmation=input(\"Press Any key to confirm or Press enter to Cancel \\n\")\n","                if confirmation ==\"\":\n","                  break\n","                else:\n","                  name,amount,category,date=tracker.input()\n","\n","                  expense=Expense(name=name,amount=amount,category=category,date=date,Type=\"Expense\")\n","\n","                  tracker.additem(expense)\n","                  break\n","\n","            elif choice==0:\n","              break\n","            else:\n","              print(\"Invalid choice!\")\n","          except ValueError:\n","            print(\"Invalid input! Please enter correct number.\")\n","            continue\n","\n","      if choice==2:\n","\n","          while True:\n","\n","            print(\"1. View Expenses\")\n","            print(\"2. View Income\")\n","            print(\"3. View journal\")\n","            print(\"0. To Back\")\n","            try:\n","              choice=int(input(\"Enter your choice: \"))\n","              if choice==1:\n","                tracker.viewexpenses()\n","                wanna_filer=input(\"Do you want to filter? (y/n): \")\n","                if wanna_filer.lower()==\"y\":\n","                  tracker.filter(Type=\"Expense\")\n","\n","                break\n","              elif choice==2:\n","                tracker.viewincomes()\n","                wanna_filer=input(\"Do you want to filter? (y/n): \")\n","                if wanna_filer.lower()==\"y\":\n","                  tracker.filter(Type=\"Income\")\n","                break\n","              elif choice==3:\n","                tracker.viewjournal()\n","                wanna_filer=input(\"Do you want to filter? (y/n): \")\n","                if wanna_filer.lower()==\"y\":\n","                  tracker.filter()\n","                break\n","\n","\n","              elif choice==0:\n","                break\n","              else:\n","                print(\"Invalid choice!\")\n","            except ValueError:\n","              print(\"Invalid input! Please enter correct number.\")\n","              continue\n","\n","\n","    except ValueError:\n","      print(\"Invalid input! Please enter valid number.\")\n","\n","\n","if __name__==\"__main__\":\n","  main()\n"]},{"cell_type":"code","execution_count":45,"metadata":{"id":"IFhpqBpcqu-U","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1766092350131,"user_tz":-330,"elapsed":3283,"user":{"displayName":"RJ Moorthy","userId":"04368816661288944434"}},"outputId":"5b693f0e-08ee-4593-8a87-74491707aa08"},"outputs":[{"output_type":"stream","name":"stdout","text":["Reinitialized existing Git repository in /content/.git/\n","[main 5c94f92] Initial commit\n"," 1 file changed, 1 insertion(+), 1 deletion(-)\n","error: remote origin already exists.\n","fatal: could not read Password for 'https://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@github.com': No such device or address\n"]}],"source":["USERNAME = \"MoorthyRJ\"\n","TOKEN = \"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\"\n","REPO_NAME = \"Expense-and-Income-Tracker\"\n","\n","!git config --global user.name \"MoorthyRJ\"\n","!git config --global user.email \"rjmoorthy2004@gmail.com\"\n","!git init\n","!git add .\n","!git commit -m \"Initial commit\"\n","!git branch -M main\n","!git remote add origin https://{TOKEN}@github.com/{USERNAME}/{REPO_NAME}.git\n","!git push -u origin main"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"YfC1Jo_wccJ-"},"outputs":[],"source":[]}],"metadata":{"colab":{"provenance":[],"mount_file_id":"1qnOZviAl3bMf_bAqPrNKmANZ_PuU_9SS","authorship_tag":"ABX9TyPpwvjKuwoOFMLoIUhHQRGl"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}